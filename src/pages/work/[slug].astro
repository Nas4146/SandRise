---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = (await getCollection('projects')).filter((project) => !project.data.draft);
  return projects.map((project) => ({
    params: { slug: project.slug }
  }));
}
const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/work');
}

return Astro.redirect(`/projects/${slug}`, 301);

---
